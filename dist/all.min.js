angular.module("sample",["ngRoute","ngCkeditor","ui.bootstrap","ngJsonExplorer","hljs","highcharts-ng","ml.common","ml.search","ml.search.tpls","ml.utils","sample.user","sample.search","sample.common","sample.detail","sample.create"]).config(["$routeProvider","$locationProvider","mlMapsProvider",function(e,t,r){"use strict";t.html5Mode(!0),e.when("/",{templateUrl:"/search/search.html",controller:"SearchCtrl",reloadOnSearch:!1}).when("/create",{templateUrl:"/create/create.html",controller:"CreateCtrl"}).when("/detail",{templateUrl:"/detail/detail.html",controller:"DetailCtrl"}).when("/profile",{templateUrl:"/user/profile.html",controller:"ProfileCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("sample.common",[]).filter("object2Array",function(){"use strict";return function(e){var t=[];for(var r in e)e[r].__key=r,t.push(e[r]);return t}}),function(){"use strict";angular.module("sample.detail").controller("DetailCtrl",["$scope","MLRest","$routeParams",function(e,t,r){var n=r.uri,a={detail:{}};t.getDocument(n,{format:"json",transform:"indent"}).then(function(e){a.detail=e.data}),angular.extend(e,{model:a})}])}(),angular.module("sample.detail",[]),angular.module("sample.create").directive("compile",function(e){"use strict";return function(t,r,n){t.$watch(function(e){return e.$eval(n.compile)},function(n){r.html(n),e(r.contents())(t)})}}),function(){"use strict";angular.module("sample.create").controller("CreateCtrl",["$scope","MLRest","$window","User",function(e,t,r,n){var a={person:{isActive:!0,balance:0,picture:"http://placehold.it/32x32",age:0,eyeColor:"",name:"",gender:"",company:"",email:"",phone:"",address:"",about:"",registered:"",latitude:0,longitude:0,tags:[],friends:[],greeting:"",favoriteFruit:""},newTag:"",user:n};angular.extend(e,{model:a,editorOptions:{height:"100px",toolbarGroups:[{name:"clipboard",groups:["clipboard","undo"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"}],toolbar:"",toolbar_full:""},submit:function(){t.createDocument(e.model.person,{format:"json",directory:"/content/",extension:".json"}).then(function(e){r.location.href="/detail?uri="+e.replace(/(.*\?uri=)/,"")})},addTag:function(){a.person.tags.push(a.newTag),a.newTag=""}})}])}(),angular.module("sample.create",[]),function(){"use strict";angular.module("sample.search").controller("SearchCtrl",["$scope","$location","User","MLSearchFactory","MLRemoteInputService",function(e,t,r,n,a){function o(e){u.search=e,u.qtext=l.getText(),u.page=l.getPage(),a.setInput(u.qtext),t.search(l.getParams())}function i(e){return u.user.authenticated?(arguments.length&&(u.qtext=e),void l.setText(u.qtext).setPage(u.page).search().then(o)):void(u.search={})}var l=n.newContext(),u={page:1,qtext:"",search:{},user:r};!function(){a.initCtrl(e,u,l,i),e.$watch("model.user.authenticated",function(){i()}),l.fromParams().then(function(){l.setText(u.qtext),o({})}),e.$on("$locationChangeSuccess",function(e,t,r){l.locationChange(t,r).then(function(){i()})})}(),angular.extend(e,{model:u,search:i,toggleFacet:function(e,t){l.toggleFacet(e,t).search().then(o)},chartConfig:{options:{chart:{type:"column"},tooltip:{style:{padding:10,fontWeight:"bold"}}},series:[{data:[10,15,12,8,7]}],title:{text:"Cancelled Trades per day"},loading:!1,xAxis:{currentMin:0,currentMax:20,title:{text:"values"}},useHighStocks:!1,size:{width:400,height:300},func:function(e){}},chartConfig2:{options:{tooltip:{style:{padding:10,fontWeight:"bold"}}},series:[{type:"column",name:"Jane",data:[3,2,1,3,4,3,2,5,6,2,5,1]},{type:"column",name:"John",data:[2,3,5,7,6,4,3,2,1,2,3,4]},{type:"column",name:"Joe",data:[4,3,3,9,0,10,11,14,18,20,22,40]},{type:"spline",name:"Average",data:[3,2.67,3,6.33,3.33,4.2,5,6,7,8,9,15]},{type:"pie",name:"Total cancelled trades",data:[{name:"Jane",y:13,color:Highcharts.getOptions().colors[0]},{name:"John",y:23,color:Highcharts.getOptions().colors[1]},{name:"Joe",y:135,color:Highcharts.getOptions().colors[2]}],center:[100,80],size:100,showInLegend:!1,dataLabels:{enabled:!1}}],title:{text:"Cancelled Trades per month"},loading:!1,xAxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],title:{text:"Month"}},yAxis:{title:{text:"Cancelled trades"}},useHighStocks:!1,size:{width:700,height:400},func:function(e){}},chartConfig3:{options:{chart:{type:"spline",events:{load:function(){var e=this.series[0];setInterval(function(){var t=(new Date).getTime(),r=Math.random();e.addPoint([t,r],!0,!0)},1e3)}}},tooltip:{style:{padding:10,fontWeight:"bold"}}},series:[{data:function(){var e,t=[],r=(new Date).getTime();for(e=0;19>=e;e+=1)t.push({x:r+e,y:Math.random()});return t}()}],title:{text:"Random data points from function"},loading:!1,xAxis:{type:"datetime",tickPixelInterval:150,title:{text:"values"}},yAxis:{title:{text:"Value"},plotLines:[{value:0,width:1,color:"#808080"}]},useHighStocks:!1,size:{width:400,height:300},func:function(e){}}})}])}(),angular.module("sample.search",[]),function(){"use strict";angular.module("sample.user").controller("ProfileCtrl",["$scope","MLRest","User","$location",function(e,t,r,n){var a={user:r,newEmail:""};angular.extend(e,{model:a,addEmail:function(){e.profileForm.newEmail.$error.email||(e.model.user.emails||(e.model.user.emails=[]),e.model.user.emails.push(a.newEmail),a.newEmail="")},removeEmail:function(t){e.model.user.emails.splice(t,1)},submit:function(){t.updateDocument({user:{fullname:e.model.user.fullname,emails:e.model.user.emails}},{format:"json",uri:"/users/"+e.model.user.name+".json"}).then(function(e){n.path("/")})}})}])}(),function(){"use strict";angular.module("sample.user").directive("mlUser",[function(){return{restrict:"EA",controller:"UserController",replace:!0,scope:{},templateUrl:"/user/user-dir.html"}}]).controller("UserController",["$scope","User",function(e,t){angular.extend(e,{user:t,login:t.login,logout:function(){t.logout(),e.password=""}})}])}(),function(){"use strict";angular.module("sample.user").factory("User",["$http",function(e){function t(){return n.name="",n.password="",n.loginError=!1,n.authenticated=!1,n.hasProfile=!1,n.fullname="",n.emails=[],n}function r(e){var t=e.data;n.authenticated=t.authenticated,n.authenticated&&(n.name=t.username,t.profile&&(n.hasProfile=!0,n.fullname=t.profile.fullname,_.isArray(t.profile.emails)?n.emails=t.profile.emails:n.emails=[t.profile.emails]))}var n={};return t(),e.get("/user/status",{}).then(r),angular.extend(n,{login:function(t,a){e.get("/user/login",{params:{username:t,password:a}}).then(function(e){r(e),n.loginError=!n.authenticated})},logout:function(){e.get("/user/logout").then(t)}}),n}])}(),angular.module("sample.user",["sample.common"]),function(){"use strict";angular.module("sample.common").factory("MLSampleQueryBuilder",[function(){var e=function(){return 1===arguments.length&&angular.isArray(arguments[0])?{"and-query":{queries:arguments[0]}}:{"and-query":{queries:Array.prototype.slice.call(arguments)}}};return{andQuery:e,boostQuery:function(t,r){return t?{"boost-query":{"matching-query":t,"boosting-query":r}}:{"boost-query":{"matching-query":e(),"boosting-query":r}}},collectionConstraintQuery:function(e,t){return{"collection-constraint-query":{"constraint-name":e,uri:Array.isArray(t)?t:[t]}}},customConstraintQuery:function(e,t){return{"custom-constraint-query":{"constraint-name":e,text:t}}},customGeospatialConstraintQuery:function(e,t,r){return{"custom-constraint-query":{"constraint-name":e,annotation:t,box:r}}},documentQuery:function(e){return{"document-query":{uri:Array.isArray(e)?e:[e]}}},geospatialConstraintQuery:function(e,t){return{"geospatial-constraint-query":{"constraint-name":e,box:t}}},operatorState:function(e,t){return{"operator-state":{"operator-name":e,"state-name":t}}},orQuery:function(){return 1===arguments.length&&angular.isArray(arguments[0])?{"or-query":{queries:arguments[0]}}:{"or-query":{queries:Array.prototype.slice.call(arguments)}}},propertiesQuery:function(e){return{"properties-query":e}},rangeConstraintQuery:function(e,t,r,n){return n||(n=[]),t||(t="EQ"),{"range-constraint-query":{"constraint-name":e,"range-operator":t,value:r,"range-option":n}}},structuredQuery:function(){return 1===arguments.length&&angular.isArray(arguments[0])?{query:{queries:arguments[0]}}:{query:{queries:Array.prototype.slice.call(arguments)}}},termQuery:function(e,t){return t?{"term-query":{text:e,weight:t}}:{"term-query":{text:e}}},textQuery:function(e){return{qtext:e}}}}])}();