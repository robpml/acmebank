<search:options xmlns:search="http://marklogic.com/appservices/search">
  <search:search-option>unfiltered</search:search-option>
  <search:page-length>10</search:page-length>
  <search:additional-query>
    <cts:not-query xmlns:cts="http://marklogic.com/cts">
      <cts:directory-query>
        <cts:uri>/users/</cts:uri>
      </cts:directory-query>
    </cts:not-query>
  </search:additional-query>
  <search:term apply="term">
    <search:empty apply="all-results"/>
    <search:term-option>punctuation-insensitive</search:term-option>
    <search:term-option>stemmed</search:term-option>
  </search:term>
  <search:grammar>
    <search:quotation>"</search:quotation>
    <search:implicit>
      <cts:and-query strength="20" xmlns:cts="http://marklogic.com/cts"/>
    </search:implicit>
    <search:starter strength="30" apply="grouping" delimiter=")">(</search:starter>
    <search:starter strength="40" apply="prefix" element="cts:not-query">-</search:starter>
    <search:joiner strength="10" apply="infix" element="cts:or-query" tokenize="word">OR</search:joiner>
    <search:joiner strength="20" apply="infix" element="cts:and-query" tokenize="word">AND</search:joiner>
    <search:joiner strength="30" apply="infix" element="cts:near-query" tokenize="word">NEAR</search:joiner>
    <search:joiner strength="30" apply="near2" consume="2" element="cts:near-query">NEAR/</search:joiner>
    <search:joiner strength="50" apply="constraint">:</search:joiner>
    <search:joiner strength="50" apply="constraint" compare="LT" tokenize="word">LT</search:joiner>
    <search:joiner strength="50" apply="constraint" compare="LE" tokenize="word">LE</search:joiner>
    <search:joiner strength="50" apply="constraint" compare="GT" tokenize="word">GT</search:joiner>
    <search:joiner strength="50" apply="constraint" compare="GE" tokenize="word">GE</search:joiner>
    <search:joiner strength="50" apply="constraint" compare="NE" tokenize="word">NE</search:joiner>
  </search:grammar>
  <search:sort-order direction="descending">
    <search:score/>
  </search:sort-order>
  <search:transform-results apply="snippet">
    <search:preferred-elements><search:element ns="" name="body"/></search:preferred-elements>
    <search:max-matches>1</search:max-matches>
    <search:max-snippet-chars>150</search:max-snippet-chars>
    <search:per-match-tokens>20</search:per-match-tokens>
  </search:transform-results>
  <search:return-query>1</search:return-query>
  <search:operator name="results">
    <search:state name="compact">
      <search:transform-results apply="snippet">
        <search:preferred-elements><search:element ns="" name="body"/></search:preferred-elements>
        <search:max-matches>1</search:max-matches>
        <search:max-snippet-chars>150</search:max-snippet-chars>
        <search:per-match-tokens>20</search:per-match-tokens>
      </search:transform-results>
    </search:state>
    <search:state name="detailed">
      <search:transform-results apply="snippet">
        <search:preferred-elements><search:element ns="" name="body"/></search:preferred-elements>
        <search:max-matches>2</search:max-matches>
        <search:max-snippet-chars>400</search:max-snippet-chars>
        <search:per-match-tokens>30</search:per-match-tokens>
      </search:transform-results>
    </search:state>
  </search:operator>
  <search:annotation xmlns="http://marklogic.com/appservices/search">Delta options here</search:annotation>

  <search:constraint name="Counterparty">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="http://www.fpml.org/2009/FpML-4-7"  name="partyId"/>
    </search:range>
  </search:constraint>

  <search:constraint name="Approval Status">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="" name="ApprovalStatus"/>
    </search:range>
  </search:constraint>

  <search:constraint name="Match Status">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="" name="MatchStatus"/>
    </search:range>
  </search:constraint>

  <search:constraint name="Book Name">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="http://acmebank.com/slc" name="BookName"/>
    </search:range>
  </search:constraint>

  <search:constraint name="Trade operation">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="http://acmebank.com/slc" name="TradeOperation"/>
    </search:range>
  </search:constraint>

  <search:constraint name='Trade Date'>
    <search:range type="xs:date" facet="true">
      <search:element ns="http://www.fpml.org/2009/FpML-4-7" name="tradeDate"/>
      <search:computed-bucket name="today" ge="P0D" lt="P1D" anchor="now">Today</search:computed-bucket>
      <search:computed-bucket name="30-days" ge="-P30D" lt="P1D" anchor="now">Last 30 days</search:computed-bucket>
      <search:computed-bucket name="60-days" ge="-P60D" lt="P1D" anchor="now">Last 60 Days</search:computed-bucket>
      <search:computed-bucket name="year" ge="-P1Y" lt="P1D" anchor="now">Last Year</search:computed-bucket>
      <search:computed-bucket name="2year" ge="-P2Y" lt="-P1Y" anchor="now">2 Years Ago</search:computed-bucket>
    </search:range>
  </search:constraint>

  <search:constraint name="Currency">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="http://www.fpml.org/2009/FpML-4-7" name="currency"/>
    </search:range>
  </search:constraint>


<!--
  <search:constraint name='Termination Date'>
    <search:range type="xs:date" facet="true">
      <search:path-index xmlns:fpml="http://www.fpml.org/2009/FpML-4-7">fpml:terminationDate/fpml:unadjustedDate</search:path-index>
      <search:computed-bucket name="today" ge="P0D" lt="P1D" anchor="now">Today</search:computed-bucket>
      <search:computed-bucket name="30-days" ge="-P30D" lt="P1D" anchor="now">Last 30 days</search:computed-bucket>
      <search:computed-bucket name="60-days" ge="-P60D" lt="P1D" anchor="now">Last 60 Days</search:computed-bucket>
      <search:computed-bucket name="year" ge="-P1Y" lt="P1D" anchor="now">Last Year</search:computed-bucket>
      <search:computed-bucket name="2year" ge="-P2Y" lt="-P1Y" anchor="now">2 Years Ago</search:computed-bucket>
      <search:computed-bucket name="30+days" ge="+P30D" lt="P1D" anchor="now">Last 30 days</search:computed-bucket>
      <search:computed-bucket name="60+days" ge="+P60D" lt="P1D" anchor="now">Last 60 Days</search:computed-bucket>
      <search:computed-bucket name="year" ge="+P1Y" lt="P1D" anchor="now">This coming Year</search:computed-bucket>
      <search:computed-bucket name="2year" ge="+P2Y" lt="+P1Y" anchor="now">2 Years Time</search:computed-bucket>
    </search:range>
  </search:constraint>

-->


  <search:constraint name='SLC Creation Date'>
    <search:range type="xs:dateTime" facet="true">
      <search:element ns="http://acmebank.com/slc" name="SLCDate"/>
      <search:computed-bucket name="today" ge="P0D" lt="P1D" anchor="now">Today</search:computed-bucket>
      <search:computed-bucket name="30-days" ge="-P30D" lt="P1D" anchor="now">Last 30 days</search:computed-bucket>
      <search:computed-bucket name="60-days" ge="-P60D" lt="P1D" anchor="now">Last 60 Days</search:computed-bucket>
      <search:computed-bucket name="year" ge="-P1Y" lt="P1D" anchor="now">Last Year</search:computed-bucket>
      <search:computed-bucket name="2year" ge="-P2Y" lt="-P1Y" anchor="now">2 Years Ago</search:computed-bucket>
      <search:bucket lt="2014-03-01T00:00:00Z" ge="2014-02-01T00:00:00Z" name="Feb2014">Feb 2014</search:bucket>
      <search:bucket lt="2014-04-01T00:00:00Z" ge="2014-03-01T00:00:00Z" name="March2014">March 2014</search:bucket>
    </search:range>
  </search:constraint>

  <!-- show all collections as facets -->
  <search:constraint name="Category">
    <search:collection prefix="" facet="true"/>
  </search:constraint>

  <!-- example facet constraint below -->
  <!--
  <search:constraint name="myconstraint">
    <search:range type="xs:string" facet="true">
      <search:facet-option>limit=5</search:facet-option>
      <search:facet-option>frequency-order</search:facet-option>
      <search:facet-option>descending</search:facet-option>
      <search:element ns="" name="my-el"/>
    </search:range>
  </search:constraint>
  -->

  <!-- example suggestion-source below -->
  <!--
  <search:suggestion-source ref="myconstraint">
    <search:suggestion-option>frequency-order</search:suggestion-option>
    <search:suggestion-option>descending</search:suggestion-option>
    <search:suggestion-option>limit=10</search:suggestion-option>
  </search:suggestion-source>
  -->

</search:options>
